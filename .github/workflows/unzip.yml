name: Extract ZIP

on:
  workflow_dispatch:

jobs:
  unzip:
    runs-on: ubuntu-latest

    permissions:
      contents: write

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3
      with:
        fetch-depth: 0

    - name: Install unzip
      run: sudo apt-get update && sudo apt-get install -y unzip

    - name: Unzip file
      run: unzip -o Microsense_Complete.zip -d temp

    - name: Move extracted folders
      run: |
        cp -R temp/.github . || true
        cp -R temp/twa-project . || true
        cp -R temp/README.md . || true

    - name: Remove temp + zip
      run: |
        rm -rf temp
        rm -f Microsense_Complete.zip

    - name: Commit extracted contents
      run: |
        git config --global user.name "GitHub Actions"
        git config --global user.email "actions@github.com"
        git add .
        git commit -m "Extracted ZIP contents" || echo "Nothing to commit"
        git push
